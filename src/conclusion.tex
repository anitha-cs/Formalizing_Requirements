\section{Discussion and Conclusion}
\label{sec:conclusion}

In this paper, we elaborated the challenges that we encountered and our approaches to successfully use formal methods for engineering requirements of a complex medical device system. There were a number of useful lessons learned from this effort, especially when applying the techniques "at scale". Based on our experience, we assert that to realize the benefits of using formal methods to verify requirements we need to adapt both the requirements engineering activities to support formal methods as well as the formal techniques to recognize common requirement verification concerns.

The quality and clarity of requirements documentation plays a crucial role in cost effectively and precisely using formal methods to verify the requirements. While some of the existing requirements documentation patterns such as those proposed by Mavin et. al.~\cite{mavin2009easy} provide a set of structural rules to document requirements, they do not discuss about identifying the contextual information of the requirement. Even the well known \emph{specification patterns}~\cite{dwyer1999patterns} focus on formalizing certain patterns of natural language requirements into temporal logic notations, do not help to address the challenge of identifying the context of the requirements. While we acknowledge the benefits of these approaches and advocate their usage, in our opinion appropriately organizing the statements also plays a crucial role in formalizing requirements precisely and easily. We believe that the hierarchical modal organization that we proposed in this paper is suitable for many systems in the critical system domain. 

In practice, mapping the informal requirements to formal statements, especially at different levels of system abstraction can not be avoided. In such cases, establishing the fidelity between them is a challenge. Our recommendation to capture the \emph{satisfaction argument} for every requirement, forces one to document how the component requirements and assumptions (if any)  contributed to satisfying the system requirements. This argument helps validate the correctness the requirements flown down to components as well as identify unrealistic assumptions for every requirement. 
In addition to improving the quality of requirements, the developers of formal tools should identify \emph{``hazardous"} use and fallibilities of their tools and mitigate them by either providing guidance or making them apparent in their tool's user interface. While we requested the developers of AGREE tool to enhance their tool to make the error detection easily, the developers of formal tools should proactively build such capabilities.

In conclusion, we believe that although the lessons we leaned in this effort was explained using the infusion pump as a case example, they are broadly applicable to practitioners working on related applications and that our experience serves informative.







